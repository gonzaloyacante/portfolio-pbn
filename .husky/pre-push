#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Running pre-push checks..."

# Full build check (including web)
echo "ğŸ—ï¸  Building full project..."
yarn build || {
  echo "âŒ Build failed. Please fix the errors before pushing."
  exit 1
}

# Run tests before push (if you have them)
echo "ğŸ§ª Running tests..."

# API tests
if [ -d "api" ]; then
  echo "Testing API..."
  yarn --cwd api test --passWithNoTests || true
fi

# Web tests (if you add them later)
# if [ -d "web" ]; then
#   echo "Testing Web..."
#   yarn --cwd web test --passWithNoTests
# fi

echo "âœ… All pre-push checks passed! Safe to push."
