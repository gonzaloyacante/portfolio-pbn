#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# Type check
echo "ğŸ“ Type checking..."
yarn type-check || {
  echo "âŒ TypeScript type check failed. Please fix the errors before committing."
  exit 1
}

# Lint
echo "ğŸ§¹ Linting..."
yarn lint || {
  echo "âŒ ESLint check failed. Please fix the errors before committing."
  exit 1
}

# Format check
echo "âœ¨ Checking code formatting..."
yarn format:check || {
  echo "âŒ Prettier format check failed. Run 'yarn format' to fix formatting."
  exit 1
}

# API Build check
echo "ğŸ—ï¸  Building API..."
yarn api:build || {
  echo "âŒ API build failed. Please fix the errors before committing."
  exit 1
}

# Prisma validation
echo "ğŸ—ƒï¸  Validating Prisma schema..."
yarn api:prisma:validate || {
  echo "âŒ Prisma schema validation failed. Please fix the schema errors."
  exit 1
}

echo "âœ… All pre-commit checks passed!"
